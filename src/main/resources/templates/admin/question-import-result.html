<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>設問定義インポート結果</title>
  <link rel="stylesheet" th:href="@{/css/common.css}">
</head>

<body>
  <div th:replace="fragments/admin-header :: header"></div>
  <div class="container">
    <h1 class="page-title">設問定義インポート結果</h1>

    <div class="card" style="margin-bottom:12px;">
      <dl class="kv">
        <dt>総件数</dt><dd><span th:text="${result.totalRows}">0</span></dd>
        <dt>成功</dt><dd><span th:text="${result.successRows}">0</span></dd>
        <dt>エラー</dt><dd><span th:text="${#lists.size(result.errors)}">0</span></dd>
      </dl>
    </div>

    <div class="card" th:if="${!#lists.isEmpty(result.errors)}">
      <h2 class="section-title">エラー一覧</h2>
      <div class="scroll-box">
        <table class="table">
          <thead><tr><th class="nowrap">#</th><th>内容</th></tr></thead>
          <tbody>
            <tr th:each="e, st : ${result.errors}">
              <td class="nowrap" th:text="${st.index + 1}">1</td>
              <td th:text="${e}">エラー</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card" th:if="${#lists.isEmpty(result.errors)}">
      <p class="muted">エラーはありません。</p>
    </div>

    <div class="actions">
      <a class="btn btn-primary" th:href="@{|/admin/surveys/${survey.surveyId}|}">アンケート詳細へ戻る</a>
      <a class="btn" th:href="@{|/admin/surveys/${survey.surveyId}/questions/import|}">もう一度インポート</a>
    </div>
  </div>
</body>
</html>

