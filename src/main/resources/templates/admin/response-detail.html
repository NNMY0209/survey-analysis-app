<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>回答詳細</title>
	<link rel="stylesheet" th:href="@{/css/common.css}">
</head>

<body>
	<div th:replace="fragments/admin-header :: header"></div>

	<div class="container">
		<h1 class="page-title">回答詳細</h1>

		<div class="card" style="margin-bottom: 12px;">
			<dl class="kv">
				<dt>response_id</dt>
				<dd th:text="${responseId}">0</dd>
			</dl>

			<div class="actions">
				<a class="btn" th:href="@{|/admin/surveys/${surveyId}/responses|}">← 一覧へ戻る</a>
			</div>
		</div>

		<div class="card">
			<h2 class="section-title">回答一覧</h2>

			<div class="scroll-box">
				<table class="table">
					<colgroup>
						<col style="width: 80px;">
						<col>
						<col style="width: 90px;">
						<col>
						<col style="width: 90px;">
					</colgroup>

					<thead>
						<tr>
							<th class="nowrap">設問順</th>
							<th>設問</th>
							<th class="nowrap">タイプ</th>
							<th>回答</th>
							<th class="nowrap">数値</th>
						</tr>
					</thead>

					<tbody>
						<tr th:if="${details == null or #lists.isEmpty(details)}">
							<td colspan="5" class="muted">データがありません</td>
						</tr>

						<tr th:each="d : ${details}">
							<!-- displayOrder が無い場合に questionOrder を使う（安全策） -->
							<td class="nowrap" th:text="${d.displayOrder != null ? d.displayOrder : d.questionOrder}">1
							</td>

							<td class="prewrap" th:text="${d.questionText}">設問文</td>

							<td class="nowrap" th:text="${d.questionType}">SINGLE</td>

							<!-- 表示用の answerDisplay がある前提。無い場合は optionText/answerText でフォールバック -->
							<td class="prewrap"
								th:text="${d.answerDisplay != null ? d.answerDisplay : ((d.optionText != null and !#strings.isEmpty(d.optionText)) ? d.optionText : d.answerText)}">
								回答
							</td>

							<td class="nowrap" th:text="${d.answerNumber != null ? d.answerNumber : ''}">
								5
							</td>
						</tr>
					</tbody>
				</table>
			</div>

			<p class="muted" style="margin-top: 10px;">
				※ 「数値」は NUMBER の場合に入ります（それ以外は空欄）。
			</p>
		</div>
	</div>
</body>


</html>